<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <meta http-equiv="Content-Language" content="zh-CN">
    <meta http-equiv="Cache-Control" content="no-cache">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="renderer" content="webkit">
    <meta name="generator" content="paper">

    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta name="description" content="">

    <title>>+++++[<----->-]<--.>+++++++[<-------->-]<+++.>+++++[<------->-]<++.>+++++++++[<++++++++++>-]<---.>++++++[<-------->-]<++.>++++++[<------>-]<.>+++++++++[<+++++++++>-]<.>+++++++[<--------->-]<++.>++++[<---->-]<.</title>

    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
    <link href="//cdn.bootcss.com/bootstrap-datetimepicker/4.17.37/css/bootstrap-datetimepicker.min.css" rel="stylesheet">

	<script src="//cdn.bootcss.com/echarts/3.1.9/echarts.min.js"></script>
	<script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="//cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
<div class='container'>
    <div class="page-header text-center">
        <h1><b>>+++++[<----->-]<--.>+++++++[<-------->-]<+++.>+++++[<------->-]<++.>+++++++++[<++++++++++>-]<---.>++++++[<-------->-]<++.>++++++[<------>-]<.>+++++++++[<+++++++++>-]<.>+++++++[<--------->-]<++.>++++[<---->-]<.</b><small>>++++[<------>-]<+.>+++++++++[<--------->-]<----.+++++++++++++.>++++++++[<+++++++++>-]<--.>++++++[<------->-]<---.--.>++++++[<++++++++>-]<.>+++++++++[<---------->-]<----.>++++++[<++++++>-]<+++.>+++++++[<++++++++>-]<--.>+++++++++[<--------->-]<--.>+++++[<++++++>-]<.</small></h1>
    </div>
    <div id='main' style='width: 100%;height: 600px;'></div>
    <div class="row">
        <div class="col-md-4 col-md-offset-4">
            <nav>
                <ul class="pager">
                    <li class="previous disabled"><a id='month_prev'><span aria-hidden="true">&larr;</span> 上月</a></li>
                    <li><a id='total'>总览</a></li>
                    <li class="next disabled"><a id='month_next'>下月 <span aria-hidden="true">&rarr;</span></a></li>
                </ul>
            </nav>
        </div>
    </div>
</div>
</body>
<script type="text/javascript">
	var data = {
		1:[
			[],
			[],
			[],
		],
		2:[
			[],
			[],
			[],
		],
		3:[
			[],
			[],
			[],
		],
		4:[
			[],
			[],
			[],
		],
		5:[
            [  14,  15,  16,  17,  18,  19,  20,  21,  22,  23,  24,  25,  26,  27,  28,  29,  30,  31],
			[1552, 512, 824, 314, 425, 615, 662, 785,1268, 725, 446, 408, 685, 443, 735,1021, 458, 661],
			[   0,   0,   0,   0,   0,   0,   0,   0, 765,   0, 248, 105, 207, 125, 440, 446,   0,  11],
		],
		6:[
			[   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14],
			[ 802, 431, 548,1214,1038, 582, 960,1049,1584,1673,1249, 861, 815, 781],
			[ 418,   0,   0, 745, 562, 128, 264, 592,1135,  10, 764, 210, 200, 350],
		],
		7:[
			[],
			[],
			[],
		],
		8:[
			[],
			[],
			[],
		],
		9:[
			[],
			[],
			[],
		],
		10:[
			[],
			[],
			[],
		],
		11:[
			[],
			[],
			[],
		],
		12:[
			[],
			[],
			[],
		],
	}
	var d = new Date()
	var m = d.getMonth() + 1
	if (window.location.search != '') {
		var r = window.location.search.substr(1).match(new RegExp('(^|&)m=([^&]*)(&|$)', 'i'))
		if (r) {
			m = parseInt(r[2])
		}
	}
    if (m > 0) {
        if (m-1 >= 1) {
            $('#month_prev').attr('href', window.location.origin+window.location.pathname+'?m='+(m-1))
            $('#month_prev').parent().removeClass('disabled')
        }
        if (m+1 <= 12) {
            $('#month_next').attr('href', window.location.origin+window.location.pathname+'?m='+(m+1))
            $('#month_next').parent().removeClass('disabled')
        }
    }
    $('#total').attr('href', window.location.origin+window.location.pathname+'?m=0')
	var mychart = echarts.init(document.getElementById('main'));
	var option = {
		title: {
			text: '',
			subtext: ''
		},
		tooltip: {
			trigger: 'axis'
		},
		legend: {
            data:['+','-','='],
            selected:{
                '=': false
            }
		},
		toolbox: {
			show: true,
			feature: {
				dataZoom: {},
				dataView: {readOnly: false},
				magicType: {type: ['line', 'bar']},
				restore: {},
				saveAsImage: {}
			}
		},
		xAxis:  {
			type: 'category',
			boundaryGap: false,
			data: []
		},
		yAxis: {
			type: 'value',
			axisLabel: {
				formatter: '{value}'
			}
		},
		series: [
			{
				name:'+',
				type:'line',
				data:[],
				markPoint: {
					data: [
						{type: 'max', name: '最大值'},
						{type: 'min', name: '最小值'}
					]
				},
				markLine: {
					data: [
						{type: 'average', name: '平均值'}
					]
				}
			},
			{
				name:'-',
				type:'line',
				data:[],
				markLine: {
					data: [
						{type: 'average', name: '平均值'}
					]
				}
			},
			{
				name:'=',
				type:'line',
				data:[],
				markPoint: {
					data: [
						{type: 'max', name: '最大值'},
						{type: 'min', name: '最小值'}
					]
				},
				markLine: {
					data: [
						{type: 'average', name: '平均值'}
					]
				}
			}
		]
	}

    if (m == 0) {
        var alldata = [[],[],[],[]]
        var idx = 0
        for (var i = 1; i <= 12; i++) {
            var n = data[i][1].length
            if (n == 0) {
                continue
            }
            for (var j = 0; j < n; j++) {
                alldata[0][idx] = i + "." + data[i][0][j]
                alldata[1][idx] = data[i][1][j]
                alldata[2][idx] = data[i][2][j]
                alldata[3][idx] = alldata[1][idx] - alldata[2][idx]
                idx++
            }
        }

        option.title.text = '总览'
        option.xAxis.data = alldata[0]
        option.series[0].data = alldata[1]
        option.series[1].data = alldata[2]
        option.series[2].data = alldata[3]
    } else {
        var n = data[m][1].length
        data[m][3] = []
        for (var i = 0; i < n; i++) {
            data[m][3][i] = data[m][1][i] - data[m][2][i]
        }
        option.title.text = m + '月'
        option.xAxis.data = data[m][0]
        option.series[0].data = data[m][1]
        option.series[1].data = data[m][2]
        option.series[2].data = data[m][3]
    }
    mychart.setOption(option)
</script>
</html>
